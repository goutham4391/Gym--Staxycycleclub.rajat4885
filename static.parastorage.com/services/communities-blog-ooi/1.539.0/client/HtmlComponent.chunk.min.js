"use strict";(("undefined"!=typeof self?self:this).webpackJsonp__wix_communities_blog_ooi=("undefined"!=typeof self?self:this).webpackJsonp__wix_communities_blog_ooi||[]).push([[5715],{6761:function(e,n,t){t.r(n),t.d(n,{Component:function(){return y},default:function(){return y},defaults:function(){return d.d}});var i=t(23788),a=t(27762),o=t.n(a),r=t(50417),s=t(34492),d=t(44113),l=t(20011),m=t(66017),h=(t(87308),["iframeRef"]),c=function(e){var n,t=e.iframeRef,i=(0,m.Z)(e,h),s=null!==(n=(0,a.useContext)(r.knF).experiments.lazyImagesAndIframes)&&void 0!==n&&n.enabled?"lazy":void 0;return o().createElement("iframe",(0,l.Z)({ref:t,className:"_2xvJT",title:"remote content",style:{backgroundColor:"transparent"},loading:s,allow:"fullscreen",allowFullScreen:!0},i))},u="undefined"==typeof window,f=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(n=e.call.apply(e,[this].concat(i))||this).state={shouldRender:!1},n.id=Math.random().toString(36).substr(2,9),n.updateIframeContent=function(e){var t;n.shouldIgnoreLoad=!0,null===(t=n.iframe)||void 0===t||t.contentWindow.postMessage({type:"htmlPlugin:updateContent",id:n.id,content:e},"*")},n.handleIframeMessage=function(e){var t=e.data,i=t.type,a=t.id,o=t.height;"htmlPlugin:heightResize"===i&&a===n.id&&n.props.onHeightChange(o)},n.handleIframeLoad=function(){!n.shouldIgnoreLoad&&n.updateIframeContent(n.props.html)},n}(0,i.Z)(n,e);var t=n.prototype;return t.componentDidMount=function(){this.setState({shouldRender:!0}),!u&&window.addEventListener("message",this.handleIframeMessage)},t.componentWillUnmount=function(){!u&&window.removeEventListener("message",this.handleIframeMessage)},t.componentWillReceiveProps=function(e){this.props.html!==e.html&&this.updateIframeContent(e.html)},t.render=function(){var e=this,n=this.props.iframeSandboxDomain,t={style:{backgroundColor:"transparent"},onLoad:this.handleIframeLoad,iframeRef:function(n){return e.iframe=n}};if(n){var i=n.replace(/\/$/,"");t.src=i+"/html/db9376e69cfa487ea0fa0b912ae51a4f_v1.html"}else t.srcdoc="\n  <head>\n    <style type=\"text/css\">\n      iframe[class|='instagram'],\n      blockquote[class|='instagram'] {\n        /* fallback script for ios below */\n        min-width: 0 !important;\n        width: calc(100vw - 2px);\n      }\n\n      body {\n        margin: 0;\n        max-width: calc(100vw);\n        display: inline-block;\n        float: left;\n        width: 100%;\n        box-sizing: border-box;\n      }\n      body > iframe {\n        margin: 0 !important;\n        width: calc(100vw - 2px) !important;\n      }\n      body::before,\n      body::after {\n        content: '.';\n        height: 0;\n        margin: 0;\n        overflow: hidden;\n        visibility: hidden;\n        display: block;\n        clear: both;\n      }\n    </style>\n    <script>\n      var isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n      (function fixInstagramWidth() {\n        // This is a fallback for the styles above. Because inline styles can't be overridden in ios.\n        var callback = function() {\n          try {\n            if (document.body.firstChild.className.indexOf('instagram') >= 0) {\n              document.body.firstChild.style.minWidth = '0';\n              document.body.firstChild.style.width = 'calc(100vw - 2px)';\n            }\n          } catch (e) {}\n        };\n\n        var observer = new MutationObserver(callback);\n\n        observer.observe(document, {\n          childList: true,\n          subtree: true,\n        });\n      })();\n\n      function initSendHeight(id) {\n        /**\n         * Handle image load by triggering a resize\n         */\n        function imageLoaded(event) {\n          if (!event || event.type !== 'load') {\n            return;\n          }\n\n          var img = event.srcElement;\n          // Remove image from loading stack\n          var imageIndex = images.indexOf(img);\n          if (imageIndex !== -1) {\n            images.splice(imageIndex, 1);\n          }\n\n          handleResize();\n        }\n\n        /**\n         * Add 'load' event listener and store reference to image\n         * @param {elm} img Image being loaded\n         */\n        var images = [];\n        function addImage(img) {\n          if (images.indexOf(img) === -1) {\n            img.addEventListener('load', imageLoaded);\n            images.push(img);\n          }\n        }\n\n        /**\n         * Filter out images in the DOM that haven't loaded yet and add listener\n         */\n        function addImageLoadListeners() {\n          var imgs = document.querySelectorAll('img');\n          for (var i = 0; i < imgs.length; i++) {\n            var image = imgs[i];\n            // Do nothing if image is already loaded\n            if (\n              image.nodeName === 'IMG' &&\n              image.src &&\n              image.complete === false &&\n              image.readyState !== 4\n            ) {\n              addImage(image);\n            }\n          }\n        }\n\n        function getHeight() {\n          var height = parseInt(document.body.offsetHeight, 10);\n          var styles = document.defaultView.getComputedStyle(document.body);\n          height += parseInt(styles.getPropertyValue('margin-bottom'), 10);\n          height += parseInt(styles.getPropertyValue('margin-top'), 10);\n          return height;\n        }\n\n        function handleResize() {\n          multipleDelayedSendHeight();\n        }\n\n        function handleIframeAdded(iframe) {\n          if (isIOS) {\n            iframe.onload = function() {\n              var src = iframe.src;              \n              if (src.indexOf('reloadMe') > -1) {\n                return;\n              }\n              iframe.src = src.replace('?', '?reloadMe=1&');\n            };\n          }\n        }\n\n        var timerId;\n        function multipleDelayedSendHeight() {\n          sendHeight();\n          clearTimeout(timerId);\n          let delay = 100;\n          timerId = setTimeout(function request() {\n            sendHeight();\n            delay *= 2;\n            if (delay < 20000) {\n              timerId = setTimeout(request, delay);\n            }\n          }, delay);\n        }\n\n        function sendHeight() {\n          var height = getHeight();\n          parent.postMessage({ type: 'htmlPlugin:heightResize', id: id, height: height }, '*');\n        }\n\n        function setupMutationObserver() {\n          var target = document.querySelector('body');\n          var observer = new MutationObserver(function(mutations) {\n            addImageLoadListeners();\n            handleResize();\n            mutations.forEach(function(mutation) {\n              mutation.addedNodes.forEach(function(el) {\n                if (el.nodeName === 'IFRAME') {\n                  handleIframeAdded(el);\n                }\n              });\n            });\n          });\n\n          var config = {\n            attributes: true,\n            childList: true,\n            characterData: true,\n            subtree: true,\n          };\n\n          observer.observe(target, config);\n        }\n\n        window.addEventListener('resize', handleResize); //this handles width change\n        setupMutationObserver();\n        handleResize();\n      }\n\n      window.addEventListener('message', function(event) {\n        if (event.data.type !== 'htmlPlugin:updateContent') {\n          return;\n        }\n\n        var content = [\n          '<!DOCTYPE html>',\n          '<html>',\n          '<head>' + document.head.innerHTML + '</head>',\n          '<body>' + event.data.content + '</body>',\n          '</html>',\n        ].join('');\n\n        document.open('text/html', 'replace');\n        document.write(content);\n        document.close();\n        initSendHeight(event.data.id);\n      });\n    <\/script>\n  </head>\n\n  <body></body>\n";return this.state.shouldRender?o().createElement(c,t):null},n}(a.Component),g=function(e){return o().createElement(c,(0,l.Z)({},e,{sandbox:"allow-popups allow-presentation allow-forms allow-same-origin allow-scripts"}))},p={htmlComponent:"yuWXS",htmlComponent_placeholder:"_3tucQ"},v=function(e,n){var t=null==e?void 0:e.includes("adsbygoogle"),i=null==e?void 0:e.includes("data-page-url=");if(n&&t&&!i){var a='<ins class="adsbygoogle"\n\tdata-page-url="'+n+'"';return null==e?void 0:e.replace(new RegExp('<ins class="adsbygoogle"',"g"),a)}return e},y=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(n=e.call.apply(e,[this].concat(i))||this).state={siteDomain:void 0},n.setHeight=function(e){var t;e>0&&e!==n.state.iframeHeight&&(n.setState({iframeHeight:e}),null===(t=n.props.store)||void 0===t||t.update("componentData",{config:{height:e}}))},n.getIframeHeight=function(){var e=n.props,t=e.settings,i=(t=void 0===t?{}:t).height,a=e.componentData.config,o=n.state.iframeHeight,r=Math.min(50,.1*n.state.iframeHeight),s=o;return a.height&&(s=o&&a.height<o&&a.height+r>o?o:a.height),s||i||d.I},n}(0,i.Z)(n,e);var t=n.prototype;return t.componentDidMount=function(){var e=this.props,n=e.componentData.config,t=e.settings,i=void 0===t?{}:t,a=i.width,o=i.height,r=i.siteDomain;n.width||(a?n.width=a:this.element?n.width=this.element.getBoundingClientRect().width:n.width=d.a),n.height||(n.height=o||d.I),this.setState({siteDomain:r})},n.getDerivedStateFromProps=function(e,n){var t=e.componentData;if("html"===t.srcType){var i=function(e){if(e){var n=/http.+com/gm.exec(e);return n?n[0]:n}}(n.siteDomain);return{html:v(t.src,i)}}},t.render=function(){var e,n=this,t=this.state.html,i=this.props,a=i.iframeSandboxDomain,l=i.theme,m=i.componentData,h=i.settings,c=(h=void 0===h?{}:h).width;this.styles=this.styles||(0,r.y0G)({styles:p,theme:l}),(0,r.GuS)(m,s);var u=m.src,v=m.srcType,y=m.config,b=(y=void 0===y?{}:y).width,w={width:this.props.isMobile?"auto":b||c||d.a,height:this.getIframeHeight(),maxHeight:this.state.iframeHeight,maxWidth:"100%"},x=this.props.experiments||this.context.experiments;return o().createElement("div",{className:this.styles.htmlComponent,ref:function(e){return n.element=e},style:w,"data-hook":"HtmlComponent"},v===d.S&&u&&o().createElement(f,{iframeSandboxDomain:a||(null===(e=x.forceIframeSandboxDomain)||void 0===e?void 0:e.enabled)&&"https://www.filesusr.com",key:d.S,tabIndex:0,html:t,onHeightChange:this.setHeight}),v===d.b&&(0,r.jvJ)(u)&&o().createElement(g,{key:d.b,tabIndex:0,src:(0,r.D5W)(u)}),!u&&!(0,r.jvJ)(u)&&o().createElement("div",{className:this.styles.htmlComponent_placeholder}))},n}(a.Component);y.contextType=r.knF},34492:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://wix-rich-content/html-content-data-schema.json","type":"object","properties":{"src":{"$id":"/properties/src","type":"string","title":"source URL","default":"","examples":["https://wix.com"]},"srcType":{"$id":"/properties/srcType","type":"string","title":"source type","default":"html","examples":["url","html"]},"config":{"$id":"/properties/config","type":"object","properties":{"width":{"$id":"/properties/config/properties/width","type":"number","title":"frame width","default":740,"examples":[500]},"height":{"$id":"/properties/config/properties/height","type":"number","title":"frame height","default":242,"examples":[200]},"safe":{"$id":"/properties/config/properties/safe","type":"boolean","title":"source safety","default":false,"examples":[true]}}}},"required":["src"]}')}}]);
//# sourceMappingURL=HtmlComponent.chunk.min.js.map